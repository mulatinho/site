<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="refresh" content="300">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Hello friends!">
  <meta name="keywords" content="open source, linux, codigo aberto, desenvolvimento, programacao, software livre, free software">
  <meta name="author" content="Alexandre Mulatinho">

  <title>Upgrade your #Slackware #Linux to (i486|x86_64) -current version</title>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2016/08/25/upgrade-your-slackware-linux-to-i486x86_64-current-version.html">
  <link rel="alternate" type="application/rss+xml" title="Alexandre Mulatinho" href="/feed.xml">

  
</head>


  <body>

    <header class="site-header" role="banner">

  <br/>
  <br/>

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Alexandre Mulatinho</a>

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/blog/">Blog</a>
            
          
            
            
            <a class="page-link" href="/docs/">Docs</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/softwares/">Softwares</a>
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Upgrade your #Slackware #Linux to (i486|x86_64) -current version</h1>
    <p class="post-meta">
      <time datetime="2016-08-25T00:00:00-03:00" itemprop="datePublished">
        
        Aug 25, 2016
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Hello friends!</p>

<p>Today is 2016/08/25, <strong>25 years of Linux</strong>! Happy Birthday!! :D :D</p>

<p>Today we gonna talk about how to upgrade a Slackware, we will use just the official slackware package management tool (<strong>slackpkg</strong>), lets upgrade a slackware 14.2 to a -current for example (this also works with other versions too, but try upgrade to the next always or deal with consequences).</p>

<p>What is <strong>slackpkg</strong>?</p>

<p>Slackpkg is a system package management tool developed by PiterPunk and oficially supported by Slackware, some of the most common subcommands are:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>slackpkg update          -&gt; synchronize with your mirror 
slackpkg search package  -&gt; looks for 'package' into mirror
slackpkg install package -&gt; install 'package' from mirror
slackpkg upgrade package -&gt; upgrade 'package' from mirror
slackpkg upgrade-all     -&gt; upgrade all packages installed
slackpkg install-new     -&gt; install new software available in repository
</code></pre></div></div>

<p><strong>First</strong>, install and <strong>upgrade</strong> your <strong>slackpkg</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># slackpkg update  #(choose a mirror in /etc/slackpkg/mirrors)
# slackpkg upgrade slackpkg
</code></pre></div></div>

<p>I like the TDS Mirror but you can choice any -current mirror you like there. Then add the kernel packages into blacklist (<strong>/etc/slackpkg/blacklist</strong>) make sure that looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#kernel-firmware
#kernel-generic
#kernel-generic-smp
#kernel-headers
#kernel-huge
#kernel-huge-smp
#kernel-modules
#kernel-modules-smp
#kernel-source
(this is not totally necessary but I like to upgrade kernels after upgrade all other softwares)
</code></pre></div></div>

<p><strong>Second</strong>, then upgrade your glibc-solibs, this is EXTREMELY NECESSARY to not crash your system after some upgrades of software.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># slackpkg upgrade glibc-solibs
</code></pre></div></div>

<p><strong>Third</strong>, install and upgrade all your new software</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># slackpkg install-new
# slackpkg upgrade-all
</code></pre></div></div>

<h3 id="kernel">Kernel</h3>

<p>Now, if you dont build your kernel youself, uncomment lines of blacklist (<strong>/etc/slackpkg/blacklist</strong>) to build the new kernel of Slackware repository. Check your lilo.conf or grub and apply the new kernel if you like (take care here, confirm that a new kernel was installed and check the images)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># cp /boot/vmlinuz /boot/vmlinuz-backup
# sed -i '/#kernel/s/^#//g' /etc/slackpkg/blacklist
# slackpkg upgrade-all 
# vim /etc/lilo.conf
</code></pre></div></div>

<p>The <strong>huge.s</strong> Slackware default kernel (built-in) have a lot of issues when we need use some softwares that require some modules/built-in by default, an example is the Docker. (huge.s default slackware kernel doesn’t support Docker very good). So you can choose use the <strong>generic kernel</strong> that has almost any module to load after boot the kernel, solving some of these issues. If you choose to do that, type the commands below, if you dont know what are you doing skip this part and use default <strong>/boot/vmlinuz</strong>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># /usr/share/mkinitrd/mkinitrd_command_generator.sh
mkinitrd -c -k 4.4.16 -f ext4 -r /dev/sda1 -m xhci-pci:ohci-pci:ehci-pci:xhci-hcd:uhci-hcd:ehci-hcd:hid:usbhid:i2c-hid:hid_generic:hid-cherry:hid-logitech:hid-logitech-dj:hid-logitech-hidpp:hid-lenovo:hid-microsoft:hid_multitouch:jbd2:mbcache:ext4 -u -o /boot/initrd.gz
(this will generate this command to build a initrd.gz image, run this)
(it also, of course, creates '/boot/initrd.gz' with your def modules)
# vim /etc/lilo.conf # or your grub. i dont use this
(put your initrd image here and choice a vmlinuz-generic as default image)
</code></pre></div></div>

<p>Your lilo.conf should now look like this (<strong>tip</strong>: create another entry with old kernel, so if this fail to boot you can boot with the older)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image = /boot/vmlinuz-generic  # re-check if you use vmlinuz
 root = /dev/sda1              # change if not your root disk
 initrd = /boot/initrd.gz
 label = Slack64-Generic
 read-only
image = /boot/vmlinuz-backup
 root = /dev/sda1
 label = Slack64-Okay
 read-only
</code></pre></div></div>

<p>Then save your MBR and reboot your system!</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># lilo -v  (check this with attention)
# reboot
</code></pre></div></div>

<p>And welcome to the <strong>-current</strong> version of Slackware, keep it upgraded :)</p>

  </div>

  
    
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://localhost:4000/2016/08/25/upgrade-your-slackware-linux-to-i486x86_64-current-version.html';
      this.page.identifier = 'http://localhost:4000/2016/08/25/upgrade-your-slackware-linux-to-i486x86_64-current-version.html';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://mulatinho.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

      <p>A blog about linux, open source, development and the life of an software engineer ;)</p>

      <br/>
      <br/>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- mulato-blog -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5138819533079914"
     data-ad-slot="8675679252"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

      
    </div>

  </div>

</footer>


  </body>

</html>
